{% extends 'base.html' %}

{% block title %}{{ image.title }} - 圖片庫{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-8">
        <div class="card">
            <img src="{{ image.image.url }}" class="card-img-top" alt="{{ image.title }}">
            <div class="card-body">
                <h2 class="card-title">{{ image.title }}</h2>
                <p class="text-muted">
                    上傳者: {{ image.uploaded_by.email }}<br>
                    上傳時間: {{ image.created_at|date:"Y年m月d日 H:i" }}
                    {% if image.updated_at != image.created_at %}
                    <br>更新時間: {{ image.updated_at|date:"Y年m月d日 H:i" }}
                    {% endif %}
                </p>
                
                {% if image.description %}
                <h5>描述</h5>
                <p class="card-text">{{ image.description|linebreaks }}</p>
                {% endif %}
                
                <div class="mt-3">
                    <a href="{% url 'gallery:gallery_list' %}" class="btn btn-secondary">返回列表</a>
                    
                    {% if user == image.uploaded_by %}
                    <a href="{% url 'gallery:image_delete' image.pk %}" class="btn btn-danger">刪除圖片</a>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
    
    <div class="col-md-4">
        <div class="card">
            <div class="card-body">
                <h5 class="card-title">圖片資訊</h5>
                <ul class="list-unstyled">
                    <li><strong>大小:</strong> {{ image.image.size|filesizeformat }}</li>
                    <li><strong>寬度:</strong> {{ image.image.width }}px</li>
                    <li><strong>高度:</strong> {{ image.image.height }}px</li>
                </ul>
            </div>
        </div>
    </div>
</div>
{% endblock %}
